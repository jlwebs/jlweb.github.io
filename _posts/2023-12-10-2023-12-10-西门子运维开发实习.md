---
layout: post
title: "2023-12-10-è¥¿é—¨å­è¿ç»´å¼€å‘å®ä¹ "
date: 2023-12-10
categories: jekyll
tags: ['output']
comments: true
---

---
layout: post
title: "è¥¿é—¨å­è¿ç»´å¼€å‘å®ä¹ "
date: 2023-12-10
categories: jekyll
tags: ['ğŸ¥- é¡¹ç›®åº“']
comments: true
---

###### å¦‚ä½•ç›‘æ§metrics
dockerå¯åŠ¨æ—¶å€™å°±å¼€å§‹è¿›è¡Œlogè®°å½•äº†ï¼Œç»Ÿä¸€ä¼ å…¥AWS CloudWatchï¼Œåç«¯ç»´æŠ¤å€ŸåŠ©æ—¥å¿—ï¼Œon call dutyè´Ÿè´£å¯¹metricsé¢æ¿è¿›è¡Œç›‘æ§ï¼Œä¸»è¦è¿˜æ˜¯dockeræ˜¯å¦è¿è¡Œæ­£å¸¸ï¼Œæ˜¯å¦æ¿€æ´»ï¼ˆhotpoolï¼‰ã€‚
###### Gitlab CI/CD
CIè‡ªåŠ¨åŒ–éƒ¨ç½²yamlæ–‡ä»¶ç¼–å†™,æ„å»ºå·¥ä½œæµpipelineï¼›ä¸»è¦æ˜¯ä¸åŒç¯å¢ƒçš„æ¨é€å’Œdeployä¹‹ç±»çš„
###### è¯ä¹¦æ›´æ–°ã€è¿‡æœŸnpmåŒ…æ›´æ–°
è¯ä¹¦æ›´æ–°æ˜¯S3å­˜å‚¨æ¡¶+step functions äººå·¥å®Œæˆæ›´æ–°ï¼ŒstepFunctionç”Ÿæˆæ–°çš„imageï¼ŒåŒæ—¶åœ¨åå°AdminDashboardè®¾ç½®hotpoolæ–°çš„imageï¼Œå¹¶disableæ—§çš„workerï¼›
npmåŒ…æ›´æ–°ï¼ŒåŸºäºCVEæ£€æµ‹ï¼Œå†²çªè§£å†³ï¼Œdependencyå…³è” npm.jsæŸ¥è¯¢
###### gitlab-runner

- ç±»ä¼¼äºjenkinsçš„agentï¼Œä»»åŠ¡æ‰§è¡Œå™¨
- æ‰§è¡Œæ­¥éª¤ï¼š
   - Runnerå‘/api/v4/runnerså‘é€POSTè¯·æ±‚ï¼Œè¯·æ±‚é‡Œå¸¦æœ‰æ³¨å†ŒToken
   - æ³¨å†ŒæˆåŠŸåè¿”å›runner_token
   - Runneré€šè¿‡å¾ªç¯å‘/api/v4/rquestå‘é€POSTè¯·æ±‚ï¼Œè¯·æ±‚é‡Œå¸¦ä¸Šrunner_token
   - è®¤è¯é€šè¿‡åæ¥å£è¿”å›å¸¦æœ‰ä»»åŠ¡ä¿¡æ¯çš„payloadå’Œä»»åŠ¡ç›¸å…³çš„job_token
   - ç„¶åå°†ä»»åŠ¡ä¿¡æ¯å‘é€ç»™æ‰§è¡Œå™¨ï¼Œæ‰§è¡Œå™¨ä½¿ç”¨job_tokenæ¥
   - å…‹éš†æ‰€éœ€çš„ä»£ç 
   - ä¸‹è½½é…ç½®æˆ–ç»„ä»¶
   - æ‰§è¡Œå™¨æ‰§è¡Œå®Œæˆåï¼Œè¿”å›ä»»åŠ¡è¾“å‡ºå’Œä»»åŠ¡çŠ¶æ€ä¿¡æ¯
   - Runnerå‘GitLabè¿”å›ä»»åŠ¡è¾“å‡ºã€ä»»åŠ¡çŠ¶æ€ä»¥åŠjob_token
###### pythonè¾…åŠ©

- logging_utilitiesã€upload_utilitiesç­‰æ¨¡å—ç†Ÿæ‚‰
- æ›´æ–°æœºå™¨æ–‡ä»¶ï¼Œå†™pipeline
- requestsã€threadingã€reã€timeç­‰åº“ä½¿ç”¨å®Œæˆè‡ªåŠ¨åŒ–æ—¥å¿—æ–‡ä»¶çˆ¬å–
###### node.jså¼€å‘å·¥ä½œ

- 1.Jestå•å…ƒæµ‹è¯•
   - Jestç»“åˆmockä»£ç åº“æºç ï¼Œdescribeå’Œitä½¿ç”¨ï¼Œç”¨expresså’Œsupertestçš„requestè¿›è¡Œå‰åç«¯è¯·æ±‚åŠ«æŒï¼Œsuperteståˆ©ç”¨expressåŠ è½½è¿‡ä¸­é—´ä»¶çš„routerè°ƒç”¨å¹¶å¼‚æ­¥è®¾ç½®headerçš„Authenticationä»¥åŠthenå¤„ç†
   - Promiseå‡½æ•°åˆ›å»ºä»¥åŠresolveä»¥é…åˆthenå¼‚æ­¥å“åº”ï¼Œåˆ›å»ºJest.fn(()=>{})mockå‡½æ•°å¯¹api.jsä¸­å®šä¹‰çš„ddbç­‰åŸºç¡€æœåŠ¡è¿”å›fakerespond
   - export å’Œ export defaultä½¿ç”¨ï¼Œå¯¹å¤–æš´éœ²objæˆ–å‡½æ•°
- 2.Node.js expressã€jsonwebtokenã€express-jwtä½¿ç”¨
   - testè¿‡ç¨‹éœ€è¦ä½¿ç”¨expressæ‰©å±•ä¸­é—´ä»¶ï¼Œå¦‚jsondecodeï¼Œexpress-jwt.decodeè¿›è¡Œè§£ç è¿”å›æŒ‡å®šplayload
- 3.sinon.js åº“è¿›è¡Œç¬¬ä¸‰æ–¹apiåº“å‡½æ•°mock
   - å¯¹jwtè¿›è¡Œsinon.stubå‡½æ•°å®ç°mockæ›¿ä»£
   - åˆ›å»ºsandboxæ²™ç›’ç¯å¢ƒ å¹¶åœ¨jest.afterAllåæ‰§è¡ŒrestoreEnviroment(),å‰ååœºæ™¯Contextåˆ‡æ¢
- 4.siemens Web Framework 
   - react framework 
      - MVVM framework
      - components
         - tableã€listã€popup-menuã€buttonã€commandç­‰ç†Ÿæ‚‰ä½¿
      - å®ŒæˆbackendåŠŸèƒ½å¯¹æ¥frontendæŸåŠŸèƒ½é¡µé¢
         - è®¾è®¡å­é¡µã€å¼¹å‡ºformã€å“åº”æ—¶é—´ã€notifyé€šçŸ¥
###### CVEä¿®å¤

- CVEä¿®å¤
   - å¯¹gitä¸­å¤šä¸ªä»“åº“ä½¿ç”¨trivy-scanæ‰«æï¼ˆsonarqubeä¹Ÿå¯ä»¥æ‰«æï¼‰
   - æœ¬åœ°ä½¿ç”¨Gitlab Runnerè¿›è¡Œæœ¬åœ°éƒ¨ç½²
   - æ‰¾å‡ºcritic& high vulnerabilities
   - å‚è€ƒæŒ‡å—ä¹¦æ“ä½œä¿®å¤
   - å®Œæˆrepoé•œåƒæ‰“åŒ…
   - åˆ†å‘è‡³amazon ecsä¸­
   - ä½¿ç”¨aws inspectorå¤æ ¸é—®é¢˜

 
